"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FixedLogoViewComponent=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadFixedLogo",value:function(){var a=new Binder("app/components/fixed-logo/fixed-logo.html"),b=a.downloadComponent();document.body.appendChild(b.getElementsByClassName("fixed-logo")[0]),TaskList.subscribeCommonTaskListEvents()}}]),a}(),fixedLogoView=new FixedLogoViewComponent,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Icons=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"iconLinksBinder",value:function(){var b="Netscape"==navigator.appName&&navigator.appVersion.indexOf("Trident")===-1,c=a.iconsObj;ElementsListener.listenToEvents("click",c.settingsIcon,function(){Router.addHash("settings-cycle"),b&&Settings.downloadSettings()}),ElementsListener.listenToEvents("click",c.taskListIcon,function(){Router.addHash("task-list"),b&&TaskList.moveToTaskList()}),ElementsListener.listenToEvents("click",c.logOutIcon,function(){logOutView.downloadLogOut()}),ElementsListener.listenToEvents("click",c.reportsIcon,function(){Router.addHash("reports"),b&&Reports.downloadReports()}),ElementsListener.listenToEvents("click",c.prevBtn,function(){Router.addHash("task-list"),b&&TaskList.moveToTaskList()}),ElementsListener.listenToEvents("click",c.nextBtn,function(){Router.addHash("reports"),b&&Reports.downloadReports()})}},{key:"downloadMainIcons",value:function(){var a=new Binder("app/components/icons/icons.html"),b=a.downloadComponent();document.getElementsByClassName("icons")[0].appendChild(b.getElementsByClassName("main-icons")[0])}},{key:"iconsObj",get:function(){return{settingsIcon:document.getElementsByClassName("settings-switcher"),taskListIcon:document.getElementsByClassName("tasks-list-icon"),logOutIcon:document.getElementsByClassName("log-out"),reportsIcon:document.getElementsByClassName("reports-switcher"),prevBtn:document.getElementsByClassName("prev-btn"),nextBtn:document.getElementsByClassName("next-arrow")}}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),UserValidationController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"successfulSignIn",value:function(){Settings.downloadSettings()}},{key:"subscribeValidationEvents",value:function(){ElementsListener.listenToEvents("click",document.getElementsByClassName("submit-sign-up"),registrationController.checkUserInfo),ElementsListener.listenToEvents("click",document.getElementsByClassName("close-registration-form"),registrationController.cancelRegistration)}},{key:"checkLoginAndPass",value:function(a){a.preventDefault(),userValidationModel.openSessionForUser()}},{key:"proceedSignInErrors",value:function(a){for(var b=userValidationController.getLogInObject,c=0;c<b.logInFields.length;c++)classManager.removeClass(b.logInFields[c],"no-validate");classManager.removeClass(b.passwordField,"invalid-field"),classManager.removeClass(b.loginField,"invalid-field"),"auth/wrong-password"==a&&(registrationView.addBorderToInvalidInput("fail-validation",1),registrationView.addInvalidField(b.passwordField)),"auth/user-not-found"==a&&(registrationView.addBorderToInvalidInput("fail-validation",0),registrationView.addInvalidField(b.loginField))}},{key:"getLogInObject",get:function(){return{loginField:document.getElementsByClassName("for-username")[0],passwordField:document.getElementsByClassName("for-password")[0],inputGroups:document.getElementsByClassName("input-groups"),logInFields:document.getElementsByClassName("fail-validation")}}}]),a}(),userValidationController=new UserValidationController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),UserValidationModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"openSessionForUser",value:function(){var a=userValidationController.getLogInObject;firebase.auth().signInWithEmailAndPassword(a.loginField.value,a.passwordField.value).then(function(a){registrationModel.saveUserDataLocally(a.uid),userValidationController.successfulSignIn()})["catch"](function(a){return userValidationController.proceedSignInErrors(a.code),!1})}}]),a}(),userValidationModel=new UserValidationModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),UserValidationView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadSignUp",value:function(a){a.preventDefault();var b=new Binder("app/components/registration/registration-form.html"),c=b.downloadComponent();userValidationView.appendSignUp(c)}},{key:"appendSignUp",value:function(a){document.getElementById("wrapper").appendChild(a.getElementsByClassName("form-registration")[0]),userValidationController.subscribeValidationEvents(),setTimeout(function(){document.getElementsByClassName("form-registration")[0].classList.add("form-registration-appearance")},500)}}]),a}(),userValidationView=new UserValidationView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LogOutController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"cancelLogOut",value:function(a){a.preventDefault();var b=logOutController.logOutElements;classManager.removeClass(b.logOutFormWrap,"log-out-form-wrapper-appearance"),setTimeout(function(){document.getElementById("wrapper").removeChild(b.logOutFormWrap)},1e3)}},{key:"subscribeLogOutEvents",value:function(){var a=logOutController.logOutElements;ElementsListener.listenToEvents("click",a.closeLogOutFrom,function(a){logOutController.cancelLogOut(a)}),ElementsListener.listenToEvents("click",a.logOutBtn,function(){logOutModel.logOutUser()},500)}},{key:"proceedErrors",value:function(a){return"An error has occured"}},{key:"logOutElements",get:function(){return{logOutFormWrap:document.getElementsByClassName("log-out-form-wrapper")[0],logOutBtn:document.getElementsByClassName("log-out-btn"),closeLogOutFrom:document.getElementsByClassName("close-log-out-form")}}}]),a}(),logOutController=new LogOutController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LogOutModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"logOutUser",value:function(){firebase.auth().signOut().then(function(){localStorage.removeItem("currentUser"),appStarter.downloadLoginPage(),location.reload()},function(a){logOutController.proceedErrors(a)})}}]),a}(),logOutModel=new LogOutModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LogOutView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadLogOut",value:function(){var a=new Binder("app/components/logOut/logOut.html"),b=a.downloadComponent();document.getElementById("wrapper").appendChild(b.getElementsByClassName("log-out-form-wrapper")[0]);var c=logOutController.logOutElements;setTimeout(function(){c.logOutFormWrap.classList.add("log-out-form-wrapper-appearance")},500),logOutController.subscribeLogOutEvents()}}]),a}(),logOutView=new LogOutView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ModalWindowController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"initModalWindow",value:function(){modalWindowModel.downloadEarlierCategories(),modalWindowView.addTaskModal()}},{key:"initEditModalWindow",value:function(a){modalWindowModel.downloadEarlierCategories(),modalWindowView.showEditModal(a)}},{key:"transitCategories",value:function(a,b){return!!a&&void modalWindowView.renderEarlierSavedCategories(a,b)}},{key:"closeModalWindow",value:function(a){modalWindowController.moveModalWindow(-50),setTimeout(function(){document.body.removeChild(a)},500)}},{key:"moveModalWindow",value:function(a){return setTimeout(function(){document.getElementsByClassName("add-task-modal")[0].style.top=a+"%"},100),a}},{key:"subscribeModalEvents",value:function(){ElementsListener.listenToEvents("click",document.getElementsByClassName("close-button"),function(){modalWindowController.closeModalWindow(document.getElementById("modal-window-elem-edit"))}),ElementsListener.listenToEvents("click",document.getElementsByClassName("check-button-edit"),function(){productivityManager.saveEditedTask(index)})}},{key:"subscribeAddTaskEvents",value:function(){ElementsListener.listenToEvents("click",document.getElementsByClassName("icon-add-task"),productivityManager.submitTask),ElementsListener.listenToEvents("click",document.getElementsByClassName("close-button"),function(){modalWindowController.closeModalWindow(document.getElementById("modal-window-elem"))})}},{key:"subscribeRemoveTaskModalEvents",value:function(a){ElementsListener.listenToEvents("click",a.removeBtn,taskDeletorObj.submitDeleteTask),ElementsListener.listenToEvents("click",a.cancelBtn,taskDeletorObj.cancelDeletion)}},{key:"getModalWindowElements",get:function(){return{task:document.querySelectorAll(".task"),titleInput:document.getElementsByClassName("title-input")[0],descriptionInput:document.getElementsByClassName("description-input")[0],categoryRadioBtn:document.querySelector("input.category-input:checked + label + label"),deadlineInput:document.getElementsByClassName("deadline-input")[0],estimationCheckboxes:document.querySelectorAll('input[type="checkbox"]:checked').length,priorityRadioBtn:document.querySelector('input[name="priority-level"]:checked + label + label'),categoryTitles:document.querySelectorAll(".categories-names .category-input"),categoryLabels:document.querySelectorAll(".categories-names .category-title"),categoriesInputs:document.querySelectorAll("input[name=category-name]"),priorityInputs:document.querySelectorAll("input[name=priority-level]")}}}]),a}(),modalWindowController=new ModalWindowController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ModalWindowModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadEarlierCategories",value:function(){var a=localStorage.getItem("currentUser"),b=firebase.database().ref("users/"+a+"/categories");b.once("value",function(a){for(var b=[].concat(a.val()),c=0;c<b.length;c++){var d=b[c];modalWindowController.transitCategories(d,c)}})}}]),a}(),modalWindowModel=new ModalWindowModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ModalWindowView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"addTaskModal",value:function(){var a=new Binder("app/components/modal-window/modal-window.html"),b=a.downloadComponent();document.body.appendChild(b.getElementById("modal-window-elem")),modalWindowController.subscribeAddTaskEvents(),modalWindowController.moveModalWindow(50),modalWindowView.attachDatePicker()}},{key:"showEditModal",value:function(a){var b=new Binder("app/components/modal-window/edit-modal-window.html"),c=b.downloadComponent();document.body.appendChild(c.getElementById("modal-window-elem-edit")),modalWindowView.fillEditModal(a)}},{key:"downloadRemoveModalWindow",value:function(){var a=new Binder("app/components/modal-window/remove-modal-window.html"),b=a.downloadComponent();document.body.appendChild(b.getElementById("modal-w-remove")),modalWindowController.moveModalWindow(50)}},{key:"fillEditModal",value:function(a){var b=modalWindowController.getModalWindowElements,c=b.task[a];b.titleInput.value=c.getElementsByClassName("task-title")[0].innerHTML,b.descriptionInput.value=c.getElementsByClassName("description-content")[0].innerHTML;for(var d=document.querySelectorAll("#modal-window-elem-edit input[type=checkbox]"),e=document.querySelectorAll(".priority-indicator span")[a].innerHTML,f=0;f<e;f++)d[f].checked=!0;var g=$(".priority-indicator")[a],h=modalWindowView.findChoosedPriority(g),i=modalWindowView.findChoosedCategory(c);b.categoriesInputs[i].checked=!0,b.priorityInputs[h].checked=!0,modalWindowController.subscribeModalEvents(),modalWindowController.moveModalWindow(50),modalWindowView.attachDatePicker()}},{key:"findChoosedCategory",value:function(a){for(var b=a.getAttribute("category"),c=$(".categories li label.category-name"),d=Array.prototype.slice.call(c),e=0;e<d.length;e++)d[e].innerHTML==a.parentNode.getAttribute("category")?b=d.indexOf(d[e]):null==b&&(b=0);return b}},{key:"findChoosedPriority",value:function(a){for(var b=$(".priorities li label.priority-name"),c=void 0,d=Array.prototype.slice.call(b),e=0;e<d.length;e++)d[e].innerHTML.toLowerCase()==a.classList[1]&&(c=d.indexOf(d[e]));return c}},{key:"renderEarlierSavedCategories",value:function(a,b){var c=modalWindowController.getModalWindowElements;c.categoryTitles[b].value=a,c.categoryLabels[b].innerHTML=c.categoryTitles[b].value}},{key:"attachDatePicker",value:function(){return $(function(){$("#datepicker").datepicker({dateFormat:"dd.mm.yy"})}),!0}}]),a}(),modalWindowView=new ModalWindowView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),RegistrationController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"checkUserInfo",value:function(a){a.preventDefault();var b=registrationController.getSignUpValidator;""!=b.loginField.value&&""!=b.passwordField.value?registrationModel.createUserInDB():registrationView.warnToFillBothFields()}},{key:"cancelRegistration",value:function(a){a.preventDefault(),classManager.removeClass(document.getElementsByClassName("form-registration")[0],"form-registration-appearance")}},{key:"submitCompleteSignUp",value:function(){classManager.removeClass(document.getElementsByClassName("sign-up-complete-wrapper")[0],"sign-up-complete-appearance"),location.reload()}},{key:"proceedRegistrationErrors",value:function(a){for(var b=registrationController.getSignUpValidator,c=0;c<b.failBlocks.length;c++)classManager.removeClass(b.failBlocks[c],"no-validate");classManager.removeClass(b.passwordField,"invalid-field"),classManager.removeClass(b.loginField,"invalid-field"),"auth/email-already-in-use"==a&&(registrationView.addBorderToInvalidInput("registration-fail",0,b.failBlocks,"The email address is already in use by another account"),registrationView.addInvalidField(b.loginField)),"auth/weak-password"==a&&(registrationView.addBorderToInvalidInput("registration-fail",1,b.failBlocks,"Password should be at least 6 characters"),registrationView.addInvalidField(b.passwordField))}},{key:"successUserCreation",value:function(){classManager.removeClass(document.getElementsByClassName("form-registration")[0],"form-registration-appearance"),registrationView.downloadCompleteSignUp()}},{key:"getSignUpValidator",get:function(){return{loginField:document.getElementsByClassName("email")[0],passwordField:document.getElementsByClassName("password")[0],inputGroups:document.getElementsByClassName("registration-field"),failBlocks:document.getElementsByClassName("registration-fail")}}}]),a}(),registrationController=new RegistrationController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),RegistrationModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"createUserInDB",value:function(){var a=registrationController.getSignUpValidator;firebase.auth().createUserWithEmailAndPassword(a.loginField.value,a.passwordField.value).then(function(a){var b=new UserData(a.uid,a.email);registrationModel.writeDefaultUserData.call(b),registrationController.successUserCreation()})["catch"](function(a){var b=a.code;return registrationController.proceedRegistrationErrors(b),!1})}},{key:"writeDefaultUserData",value:function(){var a={Urgent:new Array(30),Middle:new Array(30),High:new Array(30),Low:new Array(30),Failed:new Array(30)};for(var b in a)for(var c=0;c<=30;c++)a[b][c]=0;firebase.database().ref("users/"+this.userId).set({username:this.email,categories:["Work","Education","Hobby","Sport","Other"],cycle:{workTime:25,workIteration:5,shortBreak:5,longBreak:45},reports:a,pomodoros:a})}},{key:"saveUserDataLocally",value:function(a){return localStorage.setItem("currentUser",a),"user is saved"}}],[{key:"getUserDataLocally",value:function(){return localStorage.getItem("currentUser")}}]),a}(),registrationModel=new RegistrationModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),RegistrationView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadCompleteSignUp",value:function(){var a=new Binder("app/components/registration/registration-complete.html"),b=a.downloadComponent();document.getElementById("wrapper").appendChild(b.getElementsByClassName("sign-up-complete-wrapper")[0]),setTimeout(function(){document.getElementsByClassName("sign-up-complete-wrapper")[0].classList.add("sign-up-complete-appearance")},500),ElementsListener.listenToEvents("click",document.getElementsByClassName("sign-up-complete-btn")[0],registrationController.submitCompleteSignUp)}},{key:"addBorderToInvalidInput",value:function(a,b,c,d){try{document.getElementsByClassName(a)[b].classList.add("no-validate"),c[b].innerHTML=d}catch(e){return"no element on the page"}}},{key:"addInvalidField",value:function(a){for(var b=0;b<arguments.length;b++)arguments[b].classList.add("invalid-field")}},{key:"warnToFillBothFields",value:function(){for(var a=registrationController.getSignUpValidator,b=0;b<a.failBlocks.length;b++)registrationView.addInvalidField(a.loginField,a.passwordField),a.failBlocks[b].classList.add("no-validate"),a.failBlocks[b].innerHTML="Fill in both values"}}]),a}(),registrationView=new RegistrationView,UserData=function a(b,c){_classCallCheck(this,a),this.userId=b,this.email=c},DayReports=function b(a,c,d){_classCallCheck(this,b),this.tasksQuantity=a,this.index=c,this.chartData=d},dayChartData=new DayReports(0,0,[]),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),DayReportController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"countTotalDayTasks",value:function(a){for(var b=0;b<a.chartData.length;b++)a.tasksQuantity+=a.chartData[a.index].y,a.index++}},{key:"deleteDayReportInfo",value:function(a){a.index=0,a.tasksQuantity=0,a.chartData=[]}}]),a}(),dayReportController=new DayReportController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),DayReportModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"transferDataToDayChart",value:function(){for(var a=0;a<monthChartData.chartData.length;a++){var b=monthChartData.chartData[a],c=dayChartData.chartData,d=b.data.length;c.push({}),c[a].name=b.name,c[a].y=b.data[d-1]}dayReportController.countTotalDayTasks(dayChartData)}}]),a}(),dayReportModel=new DayReportModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),DayReportView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"createDayChart",value:function(a){dayReportView.removeLegendThatIsAbsent(a),Highcharts.chart("container-day-report",{chart:{plotBackgroundColor:null,type:"pie",plotBorderWidth:0,plotShadow:!1,backgroundColor:"transparent"},credits:{enabled:!1},exporting:{enabled:!1},title:{text:a.tasksQuantity,align:"center",verticalAlign:"middle",y:15,style:{color:"white",fontFamily:"Roboto-Regular, sans-serif",fontWeight:"normal",fontSize:"70px"}},subtitle:{text:"total",align:"center",verticalAlign:"middle",y:50,style:{color:"white",fontFamily:"Roboto-Regular, sans-serif",fontWeight:"normal",fontSize:"20px"}},tooltip:{formatter:function(){return this.point.name.toUpperCase()+"<br/>Tasks: "+this.point.y},useHTML:!0,borderColor:"none",opacity:.7,padding:5,backgroundColor:"#cddde9",style:{color:"#3c5162",fontSize:"14px",fontWeight:"bold",fontFamily:"'Roboto-Bold', sans-serif"}},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-40,style:{fontWeight:"bold",color:"white",textShadow:!1,fontSize:"16px",borderColor:"none",fontFamily:"'PT Sans', sans-serif"}},showInLegend:!0},series:{states:{hover:{halo:{attributes:{fill:"#fff"},opacity:".9"}}}}},legend:{enabled:!1},colors:["#f15a4a","#fea741","#fddc43","#1abb9b","#8da5b8"],series:[{innerSize:"50%",data:a.chartData}]})}},{key:"removeLegendThatIsAbsent",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=a.chartData[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;for(var h in g)0==g[h]&&(g.name="")}}catch(i){c=!0,d=i}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}}}]),a}(),dayReportView=new DayReportView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Reports=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"receiveReportsStatistics",value:function(){monthChartData.initializeMonthCounter(),weekMonthReportModel.generateReportsData(),weekMonthReportModel.receiveReportsData()}},{key:"removeReportsContainers",value:function(){var a=reports.initializeReportsObject;try{a.chartContainer.classList.add("non-visible-elem"),a.gapVariants[0].classList.add("non-visible-elem"),a.noDataNotification.style.display="block"}catch(b){return"element is already removed"}}},{key:"downloadWeekChart",value:function(){reports.addId("container-week-report",1),weekChartData.transferDataToWeekChart(),weekMonthReportView.createWeekOrMonthChart(weekChartData)}},{key:"downloadDayChart",value:function(){reports.addId("container-day-report",0),dayReportModel.transferDataToDayChart(dayChartData),dayReportView.createDayChart(dayChartData)}},{key:"downloadMonthChart",value:function(){reports.addId("container-month-report",2),weekMonthReportView.createWeekOrMonthChart(monthChartData)}},{key:"addId",value:function(b,c){var d=reports.initializeReportsObject;d.chartContainer.id=b,a.changeGapColor(d.gapVariants[c]),dayReportController.deleteDayReportInfo(dayChartData)}},{key:"subscribeReportsEvents",value:function(){document.getElementsByClassName("week-chart-visualizer")[0].addEventListener("click",reports.downloadWeekChart),document.getElementsByClassName("day-chart-visualizer")[0].addEventListener("click",reports.downloadDayChart),document.getElementsByClassName("month-chart-visualizer")[0].addEventListener("click",reports.downloadMonthChart)}},{key:"initializeReportsObject",get:function(){return{gapVariantsContainer:document.getElementsByClassName("gap-variants")[0],gapVariants:document.getElementsByClassName("gap-variant"),chartContainer:document.querySelector(".charts"),noDataNotification:document.getElementsByClassName("no-reports-info-wrapper")[0]}}}],[{key:"downloadReports",value:function(){weekMonthReportModel.clearReportsBeforeFill(),reports.receiveReportsStatistics(),
Router.addHash("reports");var a=new Binder("app/components/reports/reports.html"),b=a.downloadComponent();document.body.innerHTML="",document.body.appendChild(b.getElementById("wrapper")),Icons.downloadMainIcons();var c=$(".tooltip");c.tooltipSwitcher(),Icons.iconLinksBinder(),reports.subscribeReportsEvents(),setTimeout(function(){reports.downloadDayChart()},200)}},{key:"changeGapColor",value:function(a){for(var b=reports.initializeReportsObject,c=0;c<b.gapVariants.length;c++)b.gapVariants[c].classList.remove("selectedTab");a.classList.add("selectedTab")}}]),a}(),reports=new Reports,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),monthAndCounterBinding={Urgent:new Array(30),Middle:new Array(30),High:new Array(30),Low:new Array(30),Failed:new Array(30)},MonthReport=function(){function a(b,c,d,e){_classCallCheck(this,a),this.id=b,this.chartData=c,this.chartCategories=d,this.columnWidth=e}return _createClass(a,[{key:"initializeMonthCounter",value:function(){for(var a in monthAndCounterBinding)for(var b=0;b<=30;b++)monthAndCounterBinding[a][b]=0}},{key:"countPositionFromToday",value:function(a,b){var c=taskElementController.addDefaultData(),d=c.split(".")[0],e=a.split(".")[0],f=void 0;if(d-e==0){f=30;try{for(var g in monthAndCounterBinding)b==g&&(monthAndCounterBinding[g][f]++,weekMonthReportModel.sendUpdatedReportsData(f,monthAndCounterBinding[g][f],b))}catch(h){return"can not create property"}}else{var i=d-e;i<0&&(i=31+i+1),f=30-i;try{for(var j in monthAndCounterBinding)b==j&&(monthAndCounterBinding[j][f]++,weekMonthReportModel.sendUpdatedReportsData(f,monthAndCounterBinding[j][f],b))}catch(h){return"can not create property"}}}}]),a}(),monthChartData=new MonthReport("container-month-report",[{name:"Urgent",data:null},{name:"High",data:null},{name:"Middle",data:null},{name:"Low",data:null},{name:"Failed",data:null}],["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],10),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),WeekMonthReportModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"receiveReportsData",value:function(){var a=0;firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/reports").on("value",function(b){b.forEach(function(c){for(var d=b.val(),e=c.key,f=0;f<5;f++){for(var g in d)g==monthChartData.chartData[f].name&&(monthChartData.chartData[f].data=d[g]);for(var h in d)for(var i=0;i<d[h].length;i++)a+=d[h][i]}return 0==a&&setTimeout(function(){reports.removeReportsContainers()},200),e})})}},{key:"generateReportsData",value:function(){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks").orderByChild("taskIsDone").equalTo(!0).once("value",function(a){a.forEach(function(b){var c=a.val(),d=b.key,e=c[d].dateOfFinish,f=c[d].priority;monthChartData.countPositionFromToday(e,f)})}),weekMonthReportModel.generateFailedReportsData()}},{key:"generateFailedReportsData",value:function(){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks").orderByChild("taskIsDone").equalTo("failed").once("value",function(a){a.forEach(function(b){var c=a.val(),d=b.key,e=c[d].dateOfFinish,f=c[d].priority;monthChartData.countPositionFromToday(e,f)})})}},{key:"clearReportsBeforeFill",value:function(){for(var a in monthAndCounterBinding)for(var b=0;b<=30;b++)monthAndCounterBinding[a][b]=0;firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()).update({reports:monthAndCounterBinding})}},{key:"sendUpdatedReportsData",value:function(a,b,c){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/reports/"+c+"/"+a).set(b)}}]),a}(),weekMonthReportModel=new WeekMonthReportModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),WeekMonthReportView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"createWeekOrMonthChart",value:function(a){Highcharts.chart(a.id,{chart:{type:"column",backgroundColor:"transparent",lineColor:"blue",borderColor:"white",spacingBottom:65},credits:{enabled:!1},exporting:{enabled:!1},title:{text:""},legend:{itemMarginTop:30,itemStyle:{color:"#8da5b8",fontSize:"14px",fontWeight:"bold",fontFamily:"'Roboto', sans-serif"},itemHoverStyle:{color:"white"},symbolRadius:0},xAxis:{categories:a.chartCategories,labels:{style:{color:"white",fontFamily:"'Roboto', sans-serif"}},lineWidth:1,lineColor:"white",tickColor:"transparent"},yAxis:{allowDecimals:!1,min:0,gridLineColor:"#345168",color:"white",title:{text:""},lineWidth:1,lineColor:"white",labels:{style:{color:"white",fontFamily:"'Roboto', sans-serif"}}},tooltip:{formatter:function(){return this.series.name.toUpperCase()+"<br/>Tasks: "+this.point.y},borderColor:"none",opacity:.7,useHTML:!0,backgroundColor:"#cddde9",style:{color:"#3c5162",fontSize:"14px",fontWeight:"bold",fontFamily:"'Roboto-Bold', sans-serif"}},plotOptions:{column:{pointPadding:0,pointWidth:a.columnWidth,borderWidth:0,stacking:"normal"}},colors:["#f15a4a","#fea741","#fddc43","#1abb9b","#8da5b8"],series:a.chartData})}}]),a}(),weekMonthReportView=new WeekMonthReportView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=0,WeekReport=function(){function a(b,c,d,e){_classCallCheck(this,a),this.id=b,this.chartData=c,this.chartCategories=d,this.columnWidth=e}return _createClass(a,[{key:"transferDataToWeekChart",value:function(){for(var a=0;a<monthChartData.chartData.length;a++){var b=weekChartData.chartData[a],c=monthChartData.chartData[a];b.data=[];var d=c.data.length;b.name=c.name;for(var e=d-7;e<=d;e++)b.data.push(c.data[e])}}}]),a}(),weekChartData=new WeekReport("container-week-report",[{stack:"made"},{stack:"made"},{stack:"made"},{stack:"made"},{stack:"failed"}],["1","2","3","4","5","6","7"],27),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CategoriesController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"runCategories",value:function(){categoriesController.subscribeOnCategories(),categoriesModel.getSavedCategories()}},{key:"saveCategories",value:function(a,b){for(var c=[],d=document.getElementsByClassName("possible-category"),e=0;e<d.length;e++)c.push(d[e].value);categoriesModel.sendSavedCategories(c,b),Settings.notifyAboutSuccessfulSave(a)}},{key:"transitCategoriesToView",value:function(a,b){return!!a&&void categoriesView.renderEarlierSavedCategories(a,b)}},{key:"subscribeOnCategories",value:function(){ElementsListener.listenToEvents("click",document.getElementsByClassName("save-btn-categories"),Categories.createCategories)}}]),a}(),categoriesController=new CategoriesController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Categories=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"sendSavedCategories",value:function(a,b){firebase.database().ref("users/"+b).update({categories:a})}},{key:"getSavedCategories",value:function(){var a=firebase.database().ref("users/"+localStorage.getItem("currentUser")+"/categories");a.once("value",function(a){for(var b=[].concat(a.val()),c=0;c<b.length;c++){var d=b[c];categoriesController.transitCategoriesToView(d,c)}})}}],[{key:"createCategories",value:function(b){var c=new a;return categoriesController.saveCategories(b,localStorage.getItem("currentUser")),c}}]),a}(),categoriesModel=new Categories,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CategoriesView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"renderEarlierSavedCategories",value:function(a,b){try{var c=document.getElementsByClassName("possible-category");c[b].value=a}catch(d){return!1}}}]),a}(),categoriesView=new CategoriesView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CycleController=function(){function a(b,c,d,e){_classCallCheck(this,a),this.workTime=+b,this.workIteration=+c,this.shortBreak=+d,this.longBreak=+e}return _createClass(a,[{key:"runCycle",value:function(){cycleController.subscribeOnCycle(),CycleModel.receiveCycleData()}},{key:"receiveCycleDataForRender",value:function(a){cycleView.renderSavedCycleSettings(a)}},{key:"getDataForCycle",value:function(){var a=cycleController.initializeCycleElements;this.workTime=parseInt(a.workTime.value),this.workIteration=parseInt(a.workIteration.value),this.shortBreak=parseInt(a.shortBreak.value),this.longBreak=parseInt(a.longBreak.value),cycleView.createWorkTime()}},{key:"changeCycleData",value:function(a){var b=DOMElementsInitializer.counters[DOMElementsInitializer.buttonsArr.indexOf(a)];(a.classList.contains("dicrement")||a.parentNode.classList.contains("dicrement"))&&(b=DOMElementsInitializer.counters[DOMElementsInitializer.buttonsArr.indexOf(a)%4]);var c=a.parentNode.getElementsByClassName("field")[0],d=/[0-9]+/g;if(b){var e=b.value;e=parseInt(e.match(d)),cycleController.restrictCycleValues(a,c,b,e),this.getDataForCycle()}}},{key:"restrictCycleValues",value:function(a,b,c,d){if(c.classList.contains("counter-work-iteration")||c.classList.contains("counter-short-break")?a.classList.contains("increment")?d++:d--:(c.classList.contains("counter-work-time")||c.classList.contains("counter-long-time"))&&(a.classList.contains("increment")?d+=5:d-=5),c.classList.contains("counter-work-time")){if(d>40||d<15)return}else if(c.classList.contains("counter-short-break")){if(d>15||d<1)return}else if(c.classList.contains("counter-long-time")&&(d>60||d<30))return;if(c.classList.contains("counter-work-iteration")){if(d>5||d<1)return;b.value=d}else b.value=d+" min";b.classList.add("changedData")}},{key:"getWorkTime",value:function(){return this.workTime}},{key:"getWorkIterations",value:function(){return this.workIteration}},{key:"getShortBreak",value:function(){return this.shortBreak}},{key:"getLongBreak",value:function(){return this.longBreak}},{key:"countAllWidth",value:function(){var a=this.getWorkTime()+this.getShortBreak(),b=a*this.getWorkIterations()*2-2*this.getShortBreak()+this.getLongBreak();return b}},{key:"countWorkTime",value:function(){return this.workTime/this.countAllWidth()*100+"%"}},{key:"countLongBreak",value:function(){return this.longBreak/this.countAllWidth()*100+"%"}},{key:"countShortBreak",value:function(){return this.shortBreak/this.countAllWidth()*100+"%"}},{key:"countFullCycleHours",value:function(a){var b=this.workTime+this.shortBreak,c=b*this.workIteration-this.shortBreak+this.longBreak,d=parseInt(c/60),e=parseInt(c%60);cycleView.renderPartsCycleMinutes(a,"Full cycle: ",d,"h",e,"m"),this.countPartsCycleHours()}},{key:"countPartsCycleHours",value:function(){DOMElementsInitializer.timePoints.innerHTML="";var a=this.countAllWidth(),b=30,c=0;if(window.innerWidth>640)for(var d=0;d<a/30-1;d++){var e=cycleView.createCycleTitle(),f=cycleView.createCycleWrapper();e.classList.add("smallCycleTitleStyles"),cycleView.renderPartsCycleMinutes(e,c,"h",b,"m"),f.style.width=30/a*100+"%",0==c&&cycleView.renderPartsCycleMinutes(e,b,"m"),b%60==0&&(c+=1,b-=60,cycleView.renderPartsCycleMinutes(e,c,"h",b,"m")),0==b&&cycleView.renderPartsCycleMinutes(e,c,"h"),b+=30,cycleView.showPartsCycleHours(e,f)}else for(var g=0;g<a/60-1;g++){var h=cycleView.createCycleTitle(),i=cycleView.createCycleWrapper();c++,cycleView.renderPartsCycleMinutes(h,c,"h"),i.style.width=60/a*100+"%",cycleView.showPartsCycleHours(h,i)}}},{key:"subscribeOnCycle",value:function(){ElementsListener.listenToEvents("click",document.getElementsByClassName("increment"),function(a){var b=a.target.parentNode;"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:51.0) Gecko/20100101 Firefox/51.0"==navigator.userAgent&&(b=a.target),a.stopPropagation(),cycleController.changeCycleData(b)}),ElementsListener.listenToEvents("click",document.getElementsByClassName("dicrement"),function(a){var b=a.target.parentNode;"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:51.0) Gecko/20100101 Firefox/51.0"==navigator.userAgent&&(b=a.target),a.stopPropagation(),cycleController.changeCycleData(b)}),ElementsListener.listenToEvents("click",document.getElementsByClassName("save-cycle-btn"),CycleModel.createCycle),ElementsListener.listenToEvents("click",document.getElementsByClassName("next-btn"),function(){counterOfTasks=0,Router.addHash("task-list")})}},{key:"initializeCycleElements",get:function(){return{longBreak:document.getElementsByClassName("counter-long-time")[0],shortBreak:document.getElementsByClassName("counter-short-break")[0],workIteration:document.getElementsByClassName("counter-work-iteration")[0],workTime:document.getElementsByClassName("counter-work-time")[0]}}}]),a}(),DOMElementsInitializer=void 0,cycleController=new CycleController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CycleModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"saveUserCycle",value:function(a,b){cycleController.getDataForCycle(),firebase.database().ref("users/"+a).update({cycle:{workTime:cycleController.workTime,workIteration:cycleController.workIteration,shortBreak:cycleController.shortBreak,longBreak:cycleController.longBreak}}),Settings.notifyAboutSuccessfulSave(b)}}],[{key:"createCycle",value:function(b){var c=new a;c.saveUserCycle(localStorage.getItem("currentUser"),b)}},{key:"receiveCycleData",value:function(){var a=localStorage.getItem("currentUser"),b=firebase.database().ref("users/"+a+"/cycle");b.on("value",function(a){cycleController.receiveCycleDataForRender(a.val())})}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CycleView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"renderSavedCycleSettings",value:function(a){var b=cycleController.initializeCycleElements;try{b.longBreak.value=a.longBreak+" min",b.shortBreak.value=a.shortBreak+" min",b.workIteration.value=a.workIteration,b.workTime.value=a.workTime+" min",cycleController.getDataForCycle()}catch(c){return"element is already removed from DOM"}}},{key:"createWorkTime",value:function(){DOMElementsInitializer.cycle.innerHTML="",cycleView.generateWorkAndBreakIt(),cycleView.generateLongBreak(),cycleView.showFullCycle()}},{key:"generateWorkAndBreakIt",value:function(){for(var a=0;a<cycleController.getWorkIterations();a++){var b=document.createElement("div");b.classList.add("workPartsStyles"),b.style.width=cycleController.countWorkTime(),DOMElementsInitializer.cycle.appendChild(b),a<cycleController.getWorkIterations()-1&&cycleView.generateShortBreak()}}},{key:"generateLongBreak",value:function(){var a=document.createElement("div");a.classList.add("longBreakStyles"),a.style.width=cycleController.countLongBreak(),DOMElementsInitializer.cycle.appendChild(a)}},{key:"generateShortBreak",value:function(){var a=document.createElement("div");a.classList.add("breakPartsStyles"),a.style.width=cycleController.countShortBreak(),DOMElementsInitializer.cycle.appendChild(a)}},{key:"showFullCycle",value:function(){var a=document.createElement("span");a.classList.add("fullCycleTitleStyles"),cycleController.countFullCycleHours(a),DOMElementsInitializer.cycle.appendChild(a),cycleView.generateWorkAndBreakIt()}},{key:"showPartsCycleHours",value:function(a,b){b.appendChild(a),DOMElementsInitializer.timePoints.appendChild(b)}},{key:"createCycleTitle",value:function(){var a=document.createElement("span");return a.classList.add("smallCycleTitleStyles"),a}},{key:"createCycleWrapper",value:function(){var a=document.createElement("div");return a.classList.add("wrapperCycleTitleStyles"),a}},{key:"renderPartsCycleMinutes",value:function(a){a.innerHTML="";for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];for(var e=[].concat(c),f=0;f<e.length;f++)a.innerHTML+=e[f]}}]),a}(),cycleView=new CycleView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Settings=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"addSaveMessage",value:function(a){a.target.classList.contains("save-btn-categories")?document.getElementsByClassName("save-form")[0].innerHTML="Categories were successfully Saved!":document.getElementsByClassName("save-form")[0].innerHTML="Cycle was successfully Saved!"}}],[{key:"downloadSettings",value:function(){Router.addHash("settings-cycle");var b=new Binder("app/components/settings/settings.html",document.body);b.downloadComponent(),DOMElementsInitializer=a.settingsObj,categoriesController.runCategories(),Binder.downloadPlugins("#tabs"),cycleController.runCycle(),Icons.iconLinksBinder()}},{key:"notifyAboutSuccessfulSave",value:function(b){var c=new Binder("app/components/settings/save-form.html"),d=c.downloadComponent();document.body.appendChild(d.getElementById("save-form-wrapper")),settings.addSaveMessage(b),setTimeout(function(){document.getElementById("save-form-wrapper").classList.add("save-form-wrapper-appearance")},200),setTimeout(function(){a.removeNotificationSave()},2e3)}},{key:"removeNotificationSave",value:function(){$("#save-form-wrapper").fadeOut(1500),setTimeout(function(){try{document.body.removeChild(document.getElementById("save-form-wrapper"))}catch(a){return"element is already removed"}},3e3)}},{key:"settingsObj",get:function(){return{settingsVariants:document.getElementsByClassName("settings-variants")[0],increaseButtons:document.getElementsByClassName("increment"),decreaseButtons:document.getElementsByClassName("dicrement"),cycle:document.getElementsByClassName("cycle-info")[0],counters:document.getElementsByClassName("field"),countersArr:Array.prototype.slice.call(document.getElementsByClassName("field")),buttonsArr:Array.prototype.slice.call(document.getElementsByClassName("increment")).concat(Array.prototype.slice.call(document.getElementsByClassName("dicrement"))),timePoints:document.getElementsByClassName("time-points")[0]}}}]),a}(),settings=new Settings,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),TaskNotification=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"wrapNotificationFunctionality",value:function(a){if(document.getElementsByClassName("bottom-message").length>0)return!1;var b=this;setTimeout(function(){b.addNotification(a)},200),setTimeout(function(){b.removeNotification(a)},2e3)}},{key:"addNotification",value:function(a){try{var b=new Binder("app/components/taskList/notifications/bottom-notifications.html"),c=b.downloadComponent();wrapper.appendChild(c.querySelector(a)),setTimeout(function(){document.querySelector(a).classList.remove("removable-notification"),document.querySelector(a).classList.add("added-notification")},100)}catch(d){throw new Error("notification was already added")}}},{key:"removeNotification",value:function(a){setTimeout(function(){try{document.querySelector(a).classList.remove("added-notification"),document.querySelector(a).classList.add("removable-notification")}catch(b){return!1}},500),setTimeout(function(){try{document.querySelector(a).remove()}catch(b){return!1}},1500)}}],[{key:"createNotification",value:function(b){var c=new a;return c.wrapNotificationFunctionality(b),c}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SelectionManager=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"selectAll",value:function(b){var c=TaskList.getTaskListElements,d=document.querySelectorAll(b);a.pushHashesToDeleteSet(d);for(var e=selectedTaskHashes.size,f=0;f<c.quantityOfSelectedTasks.length;f++)c.quantityOfSelectedTasks[f].style.display="block",c.quantityOfSelectedTasks[f].innerHTML=e;taskDeletorObj.pushTaskToDelete(),TaskNotification.createNotification(".message-warn")}},{key:"pushHashesToDeleteSet",value:function(b){for(var c=0;c<b.length;c++)selectedTaskHashes.add(b[c].getAttribute("taskkey")),a.changeSelectedTaskImage(b[c].getElementsByClassName("indicator")[0])}},{key:"changeSelectedTaskImage",value:function(a){classManager.removeClass(a,"canceled-delete"),a.classList.add("for-delete-bg")}},{key:"changeDeselectedTaskImage",value:function(a){classManager.removeClass(a,"for-delete-bg"),classManager.removeClass(a,"for-delete"),a.classList.add("canceled-delete")}},{key:"deselectAllSelectedTasks",value:function(b){var c=TaskList.getTaskListElements,d=document.querySelectorAll(b);a.removeHashesToDeselect(d);for(var e=selectedTaskHashes.size,f=0;f<c.quantityOfSelectedTasks.length;f++){if(0==c.quantityOfSelectedTasks[f].innerHTML)return;c.quantityOfSelectedTasks[f].innerHTML=e}}},{key:"removeHashesToDeselect",value:function(b){for(var c=0;c<b.length;c++)selectedTaskHashes["delete"](b[c].getAttribute("taskkey")),a.changeDeselectedTaskImage(b[c].getElementsByClassName("indicator")[0])}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),TaskManager=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"submitTask",value:function(){for(var a=modalWindowController.getModalWindowElements,b={title:a.titleInput.value,description:a.descriptionInput.value,category:a.categoryRadioBtn.innerHTML,deadline:a.deadlineInput.value,estimation:a.estimationCheckboxes,priority:a.priorityRadioBtn.innerHTML,colorIndicator:null,taskIsDone:!1,timerIsOn:!1,startOfTimer:0,timerIterations:0,dateOfFinish:null,dailyTask:!1},c=document.getElementsByClassName("category-input"),d=[],e=0;e<c.length;e++)d.push(c[e].value);var f=d.indexOf(b.category);b.colorIndicator=f-1,""==b.deadline&&(b.deadline=taskElementController.addDefaultData()),taskElementModel.sendSubmittedData(b),modalWindowController.closeModalWindow(document.getElementById("modal-window-elem")),TaskNotification.createNotification(".message-success"),taskElementController.checkIfALLTasksAreDone()}},{key:"saveEditedTask",value:function(a){var b=productivityManager.editModalWindowElem,c={};if(c.title=b.titleField.value,c.description=b.descriptionField.value,c.category=b.checkedCategory.value,c.priority=b.checkedPriority.innerHTML,c.deadline=b.deadlineInput.value,c.estimation=b.checkedEstimation.length,""==b.deadlineInput.value){var d=taskElementController.addDefaultData();c.deadline=d}for(var e=[],f=0;f<b.allCategoriesNames.length;f++)e.push(b.allCategoriesNames[f].value);c.colorIndicator=e.indexOf(c.category)-1;var g=document.getElementsByClassName("task")[a].getAttribute("taskKey");taskElementModel.sendEditedData(c,g),modalWindowController.closeModalWindow(document.getElementById("modal-window-elem-edit"))}},{key:"editModalWindowElem",get:function(){return{titleField:document.getElementsByClassName("title-input")[0],descriptionField:document.getElementsByClassName("description-input")[0],checkedCategory:document.querySelector("input.category-input:checked"),checkedPriority:document.querySelector('input[name="priority-level"]:checked + label + label'),deadlineInput:document.getElementsByClassName("deadline-input")[0],checkedEstimation:document.querySelectorAll(".tomato-estim:checked"),allCategoriesNames:document.getElementsByClassName("category-input")}}}]),a}(),productivityManager=new TaskManager,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),selectedTaskHashes=new Set,TaskDeletor=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"cancelDeletion",value:function(){selectedTaskHashes.clear(),taskDeletorObj.removeIndicatorOfQuantityDel();var a=taskDeletorObj.deleteTaskObj;modalWindowController.closeModalWindow(document.getElementById("modal-w-remove"));for(var b=0;b<a.indicator.length;b++)a.indicator[b].classList.remove("for-delete","for-delete-bg"),a.indicator[b].classList.add("canceled-delete");TaskNotification.createNotification(".message-info")}},{key:"givePossibilityToDelete",value:function(){for(var a=TaskList.getTaskListElements,b=taskDeletorObj.deleteTaskObj,c=0;c<b.indicator.length;c++)b.indicator[c].classList.remove("canceled-delete"),b.indicator[c].classList.add("for-delete");for(var d=0;d<a.quantityOfSelectedTasks.length;d++)""===a.quantityOfSelectedTasks[d].innerHTML&&(a.quantityOfSelectedTasks[d].style.display="block",a.quantityOfSelectedTasks[d].innerHTML=0)}},{key:"pushTaskToDelete",value:function(a){var b=TaskList.getTaskListElements;if(a.target.classList.contains("indicator")){a.target.classList.add("for-delete-bg"),selectedTaskHashes.add(a.target.parentNode.parentNode.getAttribute("taskKey"));for(var c=selectedTaskHashes.size,d=0;d<b.quantityOfSelectedTasks.length;d++)b.quantityOfSelectedTasks[d].style.display="block",b.quantityOfSelectedTasks[d].innerHTML=c}}},{key:"submitDeleteTask",value:function(){var a=!0,b=!1,c=void 0;try{for(var d,e=selectedTaskHashes[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+f).remove()}}catch(g){b=!0,c=g}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}modalWindowController.closeModalWindow(document.getElementById("modal-w-remove")),taskDeletorObj.removeIndicatorOfQuantityDel(),selectedTaskHashes.clear(),taskElementController.checkIfTaskListEmpty(),TaskNotification.createNotification(".message-delete")}},{key:"checkIfToDeleteTasks",value:function(){var a=taskDeletorObj.deleteTaskObj;document.querySelector(".quantity-del-tasks").innerHTML>0&&(modalWindowView.downloadRemoveModalWindow(),modalWindowController.subscribeRemoveTaskModalEvents(a)),taskDeletorObj.givePossibilityToDelete()}},{key:"removeIndicatorOfQuantityDel",value:function(){for(var a=TaskList.getTaskListElements,b=0;b<a.quantityOfSelectedTasks.length;b++)a.quantityOfSelectedTasks[b].innerHTML=0,a.quantityOfSelectedTasks[b].style.display="none"}},{key:"deleteTaskObj",get:function(){return{indicator:document.getElementsByClassName("indicator"),removeBtn:document.getElementsByClassName("remove-btn"),cancelBtn:document.getElementsByClassName("cancel-btn")}}}]),a}(),taskDeletorObj=new TaskDeletor,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),TaskElementController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"checkIfTaskListEmpty",value:function(){taskElementView.clearContainers();try{firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks").on("value",function(a){var b=document.getElementById("tasksTabs"),c=$(".add-task-sect")[0];if(null==a.val())classManager.removeClass(c,"non-visible-elem"),b.classList.add("non-visible-elem");else{classManager.removeClass(b,"non-visible-elem"),taskElementModel.filterTasks("taskIsDone",!1),taskElementModel.filterTasks("taskIsDone",!0);try{c.classList.add("non-visible-elem")}catch(d){return!1}}})}catch(a){return"nothing to remove"}}},{key:"checkIfALLTasksAreDone",value:function(){try{0==document.querySelectorAll("#globalTasks .task, #daily-tasks .task").length?(classManager.removeClass(document.getElementsByClassName("done-tasks-sect")[0],"non-visible-elem"),document.getElementsByClassName("tasks-intro")[0].classList.add("non-visible-elem")):(document.getElementsByClassName("done-tasks-sect")[0].classList.add("non-visible-elem"),classManager.removeClass(document.getElementsByClassName("tasks-intro")[0],"non-visible-elem"))}catch(a){return"element is removed"}}},{key:"generateWordMonth",value:function(a){for(var b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=a[1],d=0;d<b.length;d++)c==d&&(c=b[d-1]);return c}},{key:"notifyAboutMissedDeadlines",value:function(a){var b=a.split("."),c=new Date;c.setDate(c.getDate());var d=new Date(b[2],b[1]-1,parseInt(b[0])+1);d<c&&notificationCounter<=0&&(NotificationManager.showNotification("You have missed Deadline!","assets/img/tomato-failed.png","Productivity Tracker"),notificationCounter++)}},{key:"subscribeTaskEvents",value:function(){var a=taskElementController.taskElementsObj;ElementsListener.listenToEvents("click",a.editTaskBtn,TaskList.getIndexOfTask),ElementsListener.listenToEvents("click",a.moveTaskBtn,TaskList.getIndexOfMovableTasks),ElementsListener.listenToEvents("click",a.indicator,taskDeletorObj.pushTaskToDelete),ElementsListener.listenToEvents("click",a.removeTaskBtn,taskDeletorObj.givePossibilityToDelete),ElementsListener.listenToEvents("click",a.priorityIndicator,function(a){var b=a.target.parentNode.parentNode.getAttribute("taskkey");return a.target.parentNode.parentNode.classList.contains("done-task")?(a.stopImmediatePropagation(),TaskNotification.createNotification(".message-error"),!1):void initialTimerView.showTimer(b)})}},{key:"addActiveClassSelector",value:function(a){for(var b=0;b<document.querySelectorAll(".opportunity-select button").length;b++)document.querySelectorAll(".opportunity-select button")[b].style.color="#8da5b8";return a.style.color="white",a.style.color}},{key:"addDefaultData",value:function(){return(new Date).getDate()+"."+parseInt((new Date).getMonth()+1)+"."+(new Date).getFullYear()}},{key:"moveTaskToDaily",value:function(a){taskElementModel.sendTodayTask(a)}},{key:"filterTasksToPriority",value:function(){taskElementView.clearContainers();for(var a=document.querySelectorAll(".priority-list button"),b=0;b<a.length;b++)classManager.removeClass(a[b],"active-elem-white");
event.target.classList.add("active-elem-white"),taskElementModel.filterDataBase()}},{key:"taskElementsObj",get:function(){return{task:document.getElementsByClassName("task"),taskTitle:document.getElementsByClassName("task-title"),monthDeadlineElem:document.getElementsByClassName("monthDeadline"),priorityIndicator:document.getElementsByClassName("priority-indicator"),descriptionContent:document.getElementsByClassName("description-content"),priorityIndicatorSpan:document.querySelectorAll(".priority-indicator span"),editTaskBtn:document.getElementsByClassName("edit"),moveTaskBtn:document.getElementsByClassName("move-task"),indicator:document.getElementsByClassName("indicator"),removeTaskBtn:document.getElementsByClassName("remove-btn-icon"),dayDeadline:document.getElementsByClassName("dayDeadline")}}}]),a}(),taskElementController=new TaskElementController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),TaskElementModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"filterTasks",value:function(a,b){var c=firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks").limitToLast(5);c.orderByChild(a).equalTo(b).once("value",function(a){a.forEach(function(b){var c=a.val(),d=b.key,e=taskElementView.downloadTaskComponent();taskElementView.fillTaskWithInformation(e,c,d)})}),Binder.downloadPlugins()}},{key:"sendSubmittedData",value:function(a){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks").push(a),taskElementController.checkIfTaskListEmpty()}},{key:"sendEditedData",value:function(a,b){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+b).update(a),taskElementController.checkIfTaskListEmpty()}},{key:"sendTodayTask",value:function(a){var b=taskElementController.addDefaultData();firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+a).update({deadline:b}),taskElementController.checkIfTaskListEmpty()}},{key:"filterDataBase",value:function(){var a=firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks");a.on("value",function(a){a.forEach(function(a){var b=a.val();if(event.target.innerHTML==a.val().priority){var c=taskElementView.downloadTaskComponent();taskElementView.fillTaskWithInformation(c,b,a.key,!0)}else"All"==event.target.innerHTML&&taskElementController.checkIfTaskListEmpty()})})}}]),a}(),taskElementModel=new TaskElementModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),counterOfTasks=0,notificationCounter=0,TaskElementView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"clearContainers",value:function(){reports.receiveReportsStatistics(),document.getElementById("globalTasks").innerHTML="",document.getElementById("tab2").innerHTML="",counterOfTasks=0}},{key:"downloadTaskComponent",value:function(){var a=new Binder("app/components/taskList/task/task.html"),b=a.downloadComponent();return b}},{key:"fillTaskWithInformation",value:function(a,b,c,d){var e=void 0;d?d&&(e=b):e=b[c];var f=e.category;taskElementView.createCategoryGroup(f,a,e.colorIndicator,e,c),setTimeout(function(){!function(a){try{!function(){var b=taskElementController.taskElementsObj;b.taskTitle[counterOfTasks].innerHTML=e.title,b.taskTitle[counterOfTasks].classList.add(e.priority.toLowerCase()+"-sign"),b.descriptionContent[counterOfTasks].innerHTML=e.description;var c=e.deadline.split(".");taskElementView.trimDateDeadline(c),b.monthDeadlineElem[counterOfTasks].innerHTML=taskElementController.generateWordMonth(c),b.priorityIndicator[counterOfTasks].classList.add(e.priority.toLowerCase()),b.priorityIndicatorSpan[counterOfTasks].innerHTML=e.estimation,function(){var c={"color-category":e.colorIndicator,taskKey:a,taskisdone:e.taskIsDone};for(var d in c)b.task[counterOfTasks].setAttribute(d,c[d]);counterOfTasks++}()}()}catch(b){return!1}}(c)},50),taskElementController.subscribeTaskEvents(),taskElementController.checkIfALLTasksAreDone()}},{key:"trimDateDeadline",value:function(a){var b=taskElementController.taskElementsObj,c=a[0].split("");0==c[0]?b.dayDeadline[counterOfTasks].innerHTML=c[1]:b.dayDeadline[counterOfTasks].innerHTML=a[0]}},{key:"removeMoveTaskBtn",value:function(a){a.getElementsByClassName("move-task")[0].classList.add("non-visible-elem")}},{key:"createCategoryGroup",value:function(a,b,c,d){try{var e=document.createElement("ul");e.setAttribute("category",a);var f=document.createElement("h3");f.innerHTML=a,f.classList.add("categorized-ul-title"),e.appendChild(f),e.classList.add("categorized-ul"),e.appendChild(b.getElementsByClassName("task")[0]),0==d.taskIsDone?(taskElementView.appendTask("globalTasks",e),taskElementController.notifyAboutMissedDeadlines(d.deadline)):1==d.taskIsDone&&taskElementView.addDoneClasses(e),e.setAttribute("color-category",c),taskElementView.addColorsToCategories()}catch(g){return!1}}},{key:"addDoneClasses",value:function(a){taskElementView.appendTask("tab2",a),a.getElementsByClassName("task")[0].classList.add("done-task");for(var b=document.getElementsByClassName("done-task"),c=0;c<b.length;c++)b[c].getElementsByClassName("edit")[0].style.display="none",b[c].getElementsByClassName("indicator-wrapper")[0].style.display="none",taskElementView.removeMoveTaskBtn(a)}},{key:"appendTask",value:function(a,b){return document.getElementById(a).appendChild(b),"Element is appended"}},{key:"addColorsToCategories",value:function(){for(var a=document.querySelectorAll(".categorized-ul"),b=0;b<a.length;b++)0==a[b].getAttribute("color-category")?(a[b].classList.add("work-group"),a[b].getElementsByClassName("categorized-ul-title")[0].classList.add("work-group-title")):1==a[b].getAttribute("color-category")?(a[b].classList.add("education-group"),a[b].getElementsByClassName("categorized-ul-title")[0].classList.add("education-group-title")):2==a[b].getAttribute("color-category")?(a[b].classList.add("hobby-group"),a[b].getElementsByClassName("categorized-ul-title")[0].classList.add("hobby-group-title")):3==a[b].getAttribute("color-category")?(a[b].classList.add("sport-group"),a[b].getElementsByClassName("categorized-ul-title")[0].classList.add("sport-group-title")):4==a[b].getAttribute("color-category")&&(a[b].classList.add("other-group"),a[b].getElementsByClassName("categorized-ul-title")[0].classList.add("other-group-title"))}}]),a}(),taskElementView=new TaskElementView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),index=void 0,TaskList=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"getIndexOfTask",value:function(a){var b=document.querySelectorAll(".edit"),c=Array.prototype.slice.call(b);index=c.indexOf(a.target);var d=document.body.getElementsByClassName("task")[index].getAttribute("taskKey");modalWindowController.initEditModalWindow(index,d)}},{key:"getIndexOfMovableTasks",value:function(a){var b=document.querySelectorAll(".move-task"),c=Array.prototype.slice.call(b);index=c.indexOf(a.target);var d=document.body.getElementsByClassName("task")[index].getAttribute("taskKey");taskElementController.moveTaskToDaily(d)}},{key:"moveToTaskList",value:function(){Router.addHash("task-list"),counterOfTasks=0;var a=new Binder("app/components/taskList/task-list.html",document.body);a.downloadComponent(),Icons.downloadMainIcons(),fixedLogoView.downloadFixedLogo(),document.querySelector(".priority-list button:first-child").classList.add("active-elem-white"),setTimeout(function(){taskElementController.checkIfTaskListEmpty()},100),Binder.downloadPlugins("#tasksTabs"),Icons.iconLinksBinder(),Router.listenToHashChanges()}},{key:"subscribeCommonTaskListEvents",value:function(){var b=a.getTaskListElements;ElementsListener.listenToEvents("click",b.priorityBtn,taskElementController.filterTasksToPriority),ElementsListener.listenToEvents("click",b.removeBtnIcon,taskDeletorObj.checkIfToDeleteTasks),ElementsListener.listenToEvents("click",b.addTaskBtn,modalWindowController.initModalWindow),ElementsListener.listenToEvents("click",b.selectTasks,function(){taskElementController.addActiveClassSelector(this),SelectionManager.selectAll("#globalTasks .task")}),ElementsListener.listenToEvents("click",b.deselectTasks,function(){taskElementController.addActiveClassSelector(this),SelectionManager.deselectAllSelectedTasks("#globalTasks .task")}),window.onscroll=function(){if(b.fixedLogo){var a=window.pageYOffset||document.documentElement.scrollTop;a>50&&(b.fixedLogo.style.display="block")}}}},{key:"getTaskListElements",get:function(){return{globalListBtn:document.getElementsByClassName("btn-wrap")[0],quantityOfSelectedTasks:document.getElementsByClassName("quantity-del-tasks"),priorityBtn:document.querySelectorAll(".priority-list button"),removeBtnIcon:document.querySelectorAll(".remove-btn-icon"),addTaskBtn:document.getElementsByClassName("add-task"),selectTasks:document.getElementsByClassName("select-all-global"),deselectTasks:document.getElementsByClassName("deselect-all-global"),fixedLogo:document.getElementsByClassName("fixed-logo")[0]}}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),BreakController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"addBreakAnimationDuration",value:function(a,b,c,d){for(var e=Timer.initializeTimerElements,f=0;f<arguments.length-1;f++)arguments[f].style.animationDuration=60*d+"s";e.timerMinutes.innerHTML=d}},{key:"subscribeBreakEvents",value:function(){var a=Timer.initializeTimerElements;ElementsListener.listenToEvents("click",a.finishTaskButton,function(){finishPhaseController.finishTask(timerKey)}),ElementsListener.listenToEvents("click",a.startPomodoraButton,workPhaseController.startPomodora)}},{key:"transferTimeOfBreak",value:function(a,b,c){var d=breakModel.receiveTimeOfBreak(a,b,c);setTimeout(function(){breakPhaseView.notifyBreakOver()},1e3*d*60)}}]),a}(),breakController=new BreakController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),BreakModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"receiveTimeOfBreak",value:function(a,b,c){var d=void 0;return firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/cycle").on("value",function(e){return d=e.val().shortBreak,breakController.addBreakAnimationDuration(a,b,c,d),d}),d}}]),a}(),breakModel=new BreakModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),BreakPhaseView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"startBreak",value:function(){breakPhaseView.downloadBreakComponent(),breakController.subscribeBreakEvents(),timer.addAnimationToTimerComponents();var a=Timer.initializeTimerElements,b=timer.receiveColorIndex(timerKey);timer.addBorderColor(a.timerBlock[0],b),breakController.transferTimeOfBreak(a.timerRotator,a.timerInvader,a.timerDivider)}},{key:"downloadBreakComponent",value:function(){var a=timer.downloadTimerComponents("app/components/timer/timer-states/break-timer.html"),b=Timer.initializeTimerElements;Timer.clearTimerElements(b.timerContainer,b.activeTimer),b.timerContainer.appendChild(a.getElementsByClassName("break-timer")[0])}},{key:"downloadBreakOverComponent",value:function(){var a=Timer.initializeTimerElements,b=timer.downloadTimerComponents("app/components/timer/timer-states/break-over-timer.html");Timer.clearTimerElements(a.breakTimer,document.getElementsByClassName("timer-break-running")[0]),a.breakTimer.insertBefore(b.getElementsByClassName("timer-break")[0],a.breakButtons)}},{key:"notifyBreakOver",value:function(){var a=Timer.initializeTimerElements;breakPhaseView.downloadBreakOverComponent();var b=timer.receiveColorIndex(timerKey);timer.addBorderColor(a.introCompleted[0],b),timer.addBorderColor(a.breakWrap[0],b)}}]),a}(),breakPhaseView=new BreakPhaseView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FinishPhaseController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"completeTask",value:function(){var a=Timer.initializeTimerElements;Timer.clearTimerElements(a.timerContainer,a.activeTimer),finishPhaseView.downloadCompletedTimer(timerKey),breakTimerAttempts=0}},{key:"finishTask",value:function(a){var b=Timer.initializeTimerElements;Timer.clearTimerElements(b.timerContainer,b.breakTimer),finishPhaseView.downloadCompletedTimer(a),breakTimerAttempts=0}},{key:"failTask",value:function(){var a=Timer.initializeTimerElements,b=timer.downloadTimerComponents("app/components/timer/timer-states/failed-timer.html");Timer.clearTimerElements(a.timerContainer,a.activeTimer),a.timerContainer.appendChild(b.getElementsByClassName("timer-failed-wrapper")[0]);var c=timer.receiveColorIndex(timerKey);timer.addBorderColor(a.introCompleted[0],c),timer.addBorderColor(a.failedWrap[0],c),finishPhaseModel.sendDataTaskFailed(timerKey),finishPhaseView.removeEstimation(),breakTimerAttempts=0}},{key:"addStartPomodoraBtn",value:function(){var a=Timer.initializeTimerElements;classManager.removeClass(a.startPomodoraButton[0],"non-visible-elem"),ElementsListener.listenToEvents("click",a.startPomodoraButton,workPhaseController.startPomodora)}},{key:"receiveDateOfTaskFinish",value:function(){return(new Date).getDate()+"."+parseInt((new Date).getMonth()+1)+"."+(new Date).getFullYear()}},{key:"transitFinishPhaseData",value:function(a){finishPhaseModel.sendDataTaskDone(a)}}]),a}(),finishPhaseController=new FinishPhaseController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FinishPhaseModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"sendDataTaskFailed",value:function(a){var b=finishPhaseController.receiveDateOfTaskFinish();firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+a).update({taskIsDone:"failed",priority:"Failed",dateOfFinish:b})}},{key:"sendDataTaskDone",value:function(a){var b=finishPhaseController.receiveDateOfTaskFinish();firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+a).update({taskIsDone:!0,dateOfFinish:b})}}]),a}(),finishPhaseModel=new FinishPhaseModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FinishPhaseView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadCompletedTimer",value:function(a){var b=Timer.initializeTimerElements,c=timer.downloadTimerComponents("app/components/timer/timer-states/completed-timer.html");b.timerContainer.appendChild(c.getElementsByClassName("timer-completed-wrapper")[0]),finishPhaseView.removeEstimation(),finishPhaseController.transitFinishPhaseData(a);var d=timer.receiveColorIndex(a);timer.addBorderColor(b.introCompleted[0],d),timer.addBorderColor(b.introCompletedWrap[0],d)}},{key:"removeEstimation",value:function(){try{document.getElementsByClassName("pomodoros")[0].classList.add("non-visible-elem")}catch(a){return"element is deleted"}}}]),a}(),finishPhaseView=new FinishPhaseView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),InitialTimerController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"subscribeStartTimerEvents",value:function(a){ElementsListener.listenToEvents("click",a.finishPomodoraButton,workPhaseController.finishPomodora),ElementsListener.listenToEvents("click",a.failPomodoraButton,workPhaseController.failPomodora)}},{key:"transitTaskInformation",value:function(a){initialTimerModel.addTaskInformation(a)}},{key:"transferInfoForRender",value:function(a,b,c,d){initialTimerView.renderTaskInformation(a,b,c,d)}}]),a}(),initialTimerController=new InitialTimerController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),InitialTimerModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"addTaskInformation",value:function(a){firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+a).on("value",function(b){var c=b.val().title,d=b.val().description,e=b.val().estimation;initialTimerController.transferInfoForRender(a,c,d,e)})}}]),a}(),initialTimerModel=new InitialTimerModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),InitialTimerView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"showTimer",value:function(a){Router.addHash("timer"),timerKey=a;var b=new Binder("app/components/timer/timer.html",document.body);b.downloadComponent(),initialTimerView.downloadIntroTimer(),ElementsListener.listenToEvents("click",document.getElementsByClassName("start-timer"),initialTimerView.downloadStartTimer),initialTimerController.transitTaskInformation(timerKey),Icons.downloadMainIcons(),Icons.iconLinksBinder();var c=$(".tooltip");c.tooltipSwitcher()}},{key:"downloadIntroTimer",value:function(){var a=new Binder("app/components/timer/timer-states/intro-timer.html"),b=a.downloadComponent();document.getElementsByClassName("timer-content")[0].appendChild(b.getElementById("intro-timer"))}},{key:"downloadStartTimer",value:function(){var a=timer.downloadTimerComponents("app/components/timer/timer-states/active-timer.html"),b=Timer.initializeTimerElements;b.timerContainer.removeChild(document.getElementById("intro-timer")),b.timerContainer.appendChild(a.getElementsByClassName("active-timer")[0]),timer.addAnimationToTimerComponents(),initialTimerController.subscribeStartTimerEvents(b),workPhaseModel.receiveDurationOfTimer(b.timerRotator,b.timerInvader,b.timerDivider);var c=timer.receiveColorIndex(timerKey);timer.addBorderColor(b.timerBlock[0],c)}},{key:"renderTaskInformation",value:function(a,b,c,d){document.getElementsByClassName("task-title-timer")[0].innerHTML=b,document.getElementsByClassName("task-description-timer")[0].innerHTML=c;var e=document.getElementsByClassName("pomodoros")[0];timerAttempts=d;for(var f=0;f<timerAttempts;f++){var g=document.createElement("li");g.classList.add("pomodoro"),e.appendChild(g)}var h=timer.receiveColorIndex(a);timer.addBorderColor(document.getElementsByClassName("intro-slog")[0],h)}}]),a}(),initialTimerView=new InitialTimerView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),breakTimerAttempts=0,timerKey=void 0,timerAttempts=void 0,Timer=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"receiveColorIndex",value:function(a){try{var b=void 0;return firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/tasks/"+a).on("value",function(a){b=a.val().colorIndicator}),b}catch(c){return"element is already null"}}},{key:"addBorderColor",value:function(a,b){var c=["#ffb200","#59abe3","#9849b8","#e16c65","#00d4d9"];try{a.style.borderColor=c[b]}catch(d){return"no element to add border"}return c[b]}},{key:"downloadTimerComponents",value:function(a){var b=new Binder(a);return b.downloadComponent()}},{key:"addAnimationToTimerComponents",value:function(){var b=a.initializeTimerElements;b.timerRotator.style.animation="rotateTimer linear 1 forwards",b.timerInvader.style.animation="animateOpacity steps(1, end) 1 reverse forwards",b.timerDivider.style.animation="animateOpacity steps(1, end) 1 forwards",workPhaseModel.receiveDurationOfTimer(b.timerRotator,b.timerInvader,b.timerDivider)}},{key:"addPausedAnimation",value:function(){for(var a=0;a<arguments.length;a++)arguments[a].classList.remove("running-animation"),arguments[a].classList.add("paused-animation")}},{key:"addRunningAnimation",value:function(){for(var a=0;a<arguments.length;a++)arguments[a].classList.remove("paused-animation"),arguments[a].classList.add("running-animation")}}],[{key:"clearTimerElements",value:function(a,b){try{a.removeChild(b)}catch(c){return"element is already removed"}}},{key:"initializeTimerElements",get:function(){return{timerContainer:document.getElementsByClassName("timer-content")[0],activeTimer:document.getElementsByClassName("active-timer")[0],timerRotator:document.getElementsByClassName("rotator")[0],timerInvader:document.getElementsByClassName("invader")[0],timerDivider:document.getElementsByClassName("dimElem")[0],finishPomodoraButton:document.getElementsByClassName("finish-pomodora-btn"),failPomodoraButton:document.getElementsByClassName("fail-pomodora-btn"),finishTaskButton:document.getElementsByClassName("finish-task-btn"),startPomodoraButton:document.getElementsByClassName("start-pomodora-btn"),breakTimer:document.getElementsByClassName("break-timer")[0],pomodoroAttempts:document.getElementsByClassName("pomodoro"),timerOver:document.getElementsByClassName("timer-break")[0],breakButtons:document.getElementsByClassName("break-buttons")[0],timerBlock:document.getElementsByClassName("timer-block"),introCompleted:document.getElementsByClassName("intro-completed"),introCompletedWrap:document.getElementsByClassName("timer-completed-wrapper"),failedWrap:document.getElementsByClassName("timer-failed-wrapper"),breakWrap:document.getElementsByClassName("timer-break-wrapper"),timerMinutes:document.getElementsByClassName("q-minutes")[0]}}}]),a}(),timer=new Timer,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),WorkPhaseController=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"startPomodora",value:function(){var a=Timer.initializeTimerElements;workPhaseView.downloadWorkPhaseComponent(a),workPhaseController.subscribeWorkPhaseEvents(a),timer.addAnimationToTimerComponents(),timer.addRunningAnimation(a.timerRotator,a.timerInvader,a.timerDivider);var b=timer.receiveColorIndex(timerKey);workPhaseView.addBorder(a,b)}},{key:"finishPomodora",value:function(){var a=Timer.initializeTimerElements;if(timer.addPausedAnimation(a.timerRotator,a.timerInvader,a.timerDivider),a.pomodoroAttempts[breakTimerAttempts].classList.add("finish-pomodoro"),breakTimerAttempts++,breakTimerAttempts===timerAttempts)finishPhaseController.completeTask(),Timer.clearTimerElements(a.timerContainer,a.breakTimer);else try{breakPhaseView.startBreak()}catch(b){return"Module is corrupted or switched off"}}},{key:"failPomodora",value:function(){var a=Timer.initializeTimerElements;timer.addPausedAnimation(a.timerRotator,a.timerInvader,a.timerDivider),a.pomodoroAttempts[breakTimerAttempts].classList.add("fail-pomodoro"),breakTimerAttempts++,breakTimerAttempts===timerAttempts&&finishPhaseController.failTask(),finishPhaseController.addStartPomodoraBtn();try{workPhaseView.removeButtons(a)}catch(b){return"element is already removed"}}},{key:"subscribeWorkPhaseEvents",value:function(a){ElementsListener.listenToEvents("click",a.finishPomodoraButton,workPhaseController.finishPomodora),ElementsListener.listenToEvents("click",a.failPomodoraButton,workPhaseController.failPomodora)}},{key:"addWorkAnimationDuration",value:function(a,b,c,d){var e=Timer.initializeTimerElements;try{for(var f=0;f<arguments.length-1;f++)arguments[f].style.animationDuration=60*d+"s"}catch(g){return"element is undefined"}e.timerMinutes.innerHTML=d}}]),a}(),workPhaseController=new WorkPhaseController,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),WorkPhaseModel=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"receiveDurationOfTimer",value:function(a,b,c){var d=void 0;return firebase.database().ref("users/"+RegistrationModel.getUserDataLocally()+"/cycle").on("value",function(e){d=e.val().workTime,workPhaseController.addWorkAnimationDuration(a,b,c,d)}),d}}]),a}(),workPhaseModel=new WorkPhaseModel,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),WorkPhaseView=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadWorkPhaseComponent",value:function(a){Timer.clearTimerElements(a.timerContainer,a.activeTimer);var b=timer.downloadTimerComponents("app/components/timer/timer-states/active-timer.html");Timer.clearTimerElements(a.timerContainer,a.breakTimer,a.timerOver),a.timerContainer.appendChild(b.getElementsByClassName("active-timer")[0])}},{key:"removeButtons",value:function(a){a.failPomodoraButton[0].classList.add("non-visible-elem"),a.finishTaskButton[0].classList.add("non-visible-elem")}},{key:"addBorder",value:function(a,b){timer.addBorderColor(a.timerBlock[0],b)}}]),a}(),workPhaseView=new WorkPhaseView,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Binder=function(){function a(b,c){_classCallCheck(this,a),this.route=b,this.parent=c}return _createClass(a,[{key:"downloadComponent",value:function(a,b){var c=new XMLHttpRequest,d=new DOMParser;c.open("GET",this.route,!1),c.send();var e=d.parseFromString(c.responseText,"text/html");return this.parent&&(this.parent.innerHTML=e.body.innerHTML),c=null,e}}],[{key:"downloadPlugins",value:function(a){$(document).ready(function(){var b=$(a);b.tabSwitcher();var c=$(".tooltip");c.tooltipSwitcher()})}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ClassManager=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"removeClass",value:function(a,b){try{for(var c=a.className.split(" "),d=0;d<c.length;d++)c[d]==b&&(c.splice(d,1),d--);a.className=c.join(" ")}catch(e){return}}}]),a}(),classManager=new ClassManager,_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ElementsListener=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"listenToEvents",value:function(a,b,c){for(var d=0;d<b.length;d++)b[d].addEventListener(a,c,!1)}}]),a}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NotificationManager=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"showNotification",value:function(a,b,c){function d(a,b,c){var d={title:c,body:a,icon:b};new Notification(c,d)}"Notification"in window?"granted"===Notification.permission?d(a,b,c):"denied"!==Notification.permission&&Notification.requestPermission(function(b){if("granted"===b){new Notification(a)}}):alert("This browser does not support desktop notification"),Notification.requestPermission()}}]),a}();window.addEventListener("offline",function(){NotificationManager.showNotification("There is no Internet Connection!","assets/img/tomato-failed.png","Productivity Tracker")}),window.addEventListener("online",function(){NotificationManager.showNotification("Internet Connection has appeared!!","assets/img/tomato-fill.png","Productivity Tracker")});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Router=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"listenToHashChanges",value:function(){$(window).on("popstate",function(a){"#reports"==window.location.hash?Reports.downloadReports():"#settings-cycle"==window.location.hash?Settings.downloadSettings():"#task-list"==window.location.hash&&TaskList.moveToTaskList()})}},{key:"addHash",value:function(a){return window.location.hash=a,window.location.hash}}]),a}();Router.listenToHashChanges();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),AppStarter=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"downloadLoginPage",value:function(){var a=new Binder("app/components/login/login.html",document.body);a.downloadComponent(),Router.addHash("");var b=localStorage.getItem("currentUser");if(ElementsListener.listenToEvents("click",document.getElementsByClassName("sign-in"),userValidationController.checkLoginAndPass),ElementsListener.listenToEvents("click",document.getElementsByClassName("sign-up"),userValidationView.downloadSignUp),null!=b){window.location.hash="#task-list";var c=window.navigator,d=c.userAgent.indexOf("Edge")>-1;d&&TaskList.moveToTaskList()}else if(null==b)return!1}}]),a}(),appStarter=new AppStarter;appStarter.downloadLoginPage();
//# sourceMappingURL=sourceMap.map