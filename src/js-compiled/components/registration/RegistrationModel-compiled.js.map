{"version":3,"sources":["../../../../app/components/registration/RegistrationModel.js"],"names":["RegistrationModel","signUpValidator","registrationController","getSignUpValidator","firebase","auth","createUserWithEmailAndPassword","loginField","value","passwordField","then","user","userNew","UserData","uid","email","registrationModel","writeDefaultUserData","call","successUserCreation","catch","error","errorCode","code","proceedRegistrationErrors","monthAndCounterBinding","Array","key","l","database","ref","userId","set","username","categories","cycle","reports","pomodoros","localStorage","setItem","getItem"],"mappings":";;;;;;IAAMA,iB;;;;;;;yCACe;AACb,gBAAIC,kBAAkBC,uBAAuBC,kBAA7C;AACAC,qBAASC,IAAT,GAAgBC,8BAAhB,CAA+CL,gBAAgBM,UAAhB,CAA2BC,KAA1E,EAAiFP,gBAAgBQ,aAAhB,CAA8BD,KAA/G,EAAsHE,IAAtH,CAA2H,UAAUC,IAAV,EAAgB;AACvI,oBAAIC,UAAU,IAAIC,QAAJ,CAAaF,KAAKG,GAAlB,EAAuBH,KAAKI,KAA5B,CAAd;AACAC,kCAAkBC,oBAAlB,CAAuCC,IAAvC,CAA4CN,OAA5C;AACAV,uCAAuBiB,mBAAvB;AACH,aAJD,EAIGC,KAJH,CAIS,UAAUC,KAAV,EAAiB;AACtB,oBAAIC,YAAYD,MAAME,IAAtB;AACArB,uCAAuBsB,yBAAvB,CAAiDF,SAAjD;AACA,uBAAO,KAAP;AACH,aARD;AASH;;;+CAEsB;AACnB,gBAAIG,yBAAyB;AACzB,0BAAU,IAAIC,KAAJ,CAAU,EAAV,CADe;AAEzB,0BAAU,IAAIA,KAAJ,CAAU,EAAV,CAFe;AAGzB,wBAAQ,IAAIA,KAAJ,CAAU,EAAV,CAHiB;AAIzB,uBAAO,IAAIA,KAAJ,CAAU,EAAV,CAJkB;AAKzB,0BAAU,IAAIA,KAAJ,CAAU,EAAV;AALe,aAA7B;;AASA,iBAAK,IAAIC,GAAT,IAAgBF,sBAAhB,EAAwC;AACpC,qBAAK,IAAIG,IAAI,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,GAAzB,EAA8B;AAC1BH,2CAAuBE,GAAvB,EAA4BC,CAA5B,IAAiC,CAAjC;AACH;AACJ;;AAEDxB,qBAASyB,QAAT,GAAoBC,GAApB,CAAwB,WAAW,KAAKC,MAAxC,EAAgDC,GAAhD,CAAoD;AAChDC,0BAAU,KAAKlB,KADiC;AAEhDmB,4BAAY,CAAC,MAAD,EAAS,WAAT,EAAsB,OAAtB,EAA+B,OAA/B,EAAwC,OAAxC,CAFoC;AAGhDC,uBAAO;AACH,gCAAY,EADT;AAEH,qCAAiB,CAFd;AAGH,kCAAc,CAHX;AAIH,iCAAa;AAJV,iBAHyC;AAShDC,yBAASX,sBATuC;AAUhDY,2BAAWZ;AAVqC,aAApD;AAYH;;;4CAEmBM,M,EAAQ;AACxBO,yBAAaC,OAAb,CAAqB,aAArB,EAAoCR,MAApC;AACA,mBAAO,eAAP;AACH;;;6CAE2B;AACxB,mBAAOO,aAAaE,OAAb,CAAqB,aAArB,CAAP;AACH;;;;;;AAGL,IAAIxB,oBAAoB,IAAIhB,iBAAJ,EAAxB","file":"RegistrationModel-compiled.js","sourcesContent":["class RegistrationModel {\r\n    createUserInDB() {\r\n        let signUpValidator = registrationController.getSignUpValidator;\r\n        firebase.auth().createUserWithEmailAndPassword(signUpValidator.loginField.value, signUpValidator.passwordField.value).then(function (user) {\r\n            let userNew = new UserData(user.uid, user.email);\r\n            registrationModel.writeDefaultUserData.call(userNew);\r\n            registrationController.successUserCreation();\r\n        }).catch(function (error) {\r\n            let errorCode = error.code;\r\n            registrationController.proceedRegistrationErrors(errorCode);\r\n            return false;\r\n        });\r\n    }\r\n\r\n    writeDefaultUserData() {\r\n        let monthAndCounterBinding = {\r\n            'Urgent': new Array(30),\r\n            'Middle': new Array(30),\r\n            'High': new Array(30),\r\n            'Low': new Array(30),\r\n            'Failed': new Array(30)\r\n        };\r\n\r\n\r\n        for (let key in monthAndCounterBinding) {\r\n            for (let l = 0; l <= 30; l++) {\r\n                monthAndCounterBinding[key][l] = 0;\r\n            }\r\n        }\r\n\r\n        firebase.database().ref('users/' + this.userId).set({\r\n            username: this.email,\r\n            categories: ['Work', 'Education', 'Hobby', 'Sport', 'Other'],\r\n            cycle: {\r\n                \"workTime\": 25,\r\n                \"workIteration\": 5,\r\n                \"shortBreak\": 5,\r\n                \"longBreak\": 45\r\n            },\r\n            reports: monthAndCounterBinding,\r\n            pomodoros: monthAndCounterBinding\r\n        });\r\n    }\r\n\r\n    saveUserDataLocally(userId) {\r\n        localStorage.setItem('currentUser', userId);\r\n        return 'user is saved';\r\n    }\r\n\r\n    static getUserDataLocally() {\r\n        return localStorage.getItem('currentUser');\r\n    }\r\n}\r\n\r\nlet registrationModel = new RegistrationModel();"]}