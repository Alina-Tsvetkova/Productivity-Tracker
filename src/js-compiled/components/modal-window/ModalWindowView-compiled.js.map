{"version":3,"sources":["../../../../app/components/modal-window/ModalWindowView.js"],"names":["ModalWindowView","modalBinder","Binder","receivedDoc","downloadComponent","document","body","appendChild","getElementById","modalWindowController","subscribeAddTaskEvents","moveModalWindow","modalWindowView","attachDatePicker","index","modalWindowModel","downloadEarlierCategories","fillEditModal","modalWindow","getModalWindowElements","taskContainer","task","titleInput","value","getElementsByClassName","innerHTML","descriptionInput","modalCheckboxes","querySelectorAll","priorityIndicator","j","checked","taskPriority","$","choosedRadioCategory","setTimeout","findChoosedCategory","categoriesInputs","choosedRadioPriority","findChoosedPriority","priorityInputs","subscribeModalEvents","getAttribute","allCategoriesNames","allCategoriesNamesArr","Array","prototype","slice","call","k","length","console","log","innerText","parentNode","indexOf","allPriorityLevels","allPriorityLevelsArr","toLowerCase","classList","data","categoryTitles","categoryLabels","datepicker","dateFormat"],"mappings":"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","file":"ModalWindowView-compiled.js","sourcesContent":["class ModalWindowView {\r\n\r\n    addTaskModal() {\r\n        let modalBinder = new Binder('app/components/modal-window/modal-window.html');\r\n        let receivedDoc = modalBinder.downloadComponent();\r\n        document.body.appendChild(receivedDoc.getElementById('modal-window-elem'));\r\n        modalWindowController.subscribeAddTaskEvents();\r\n        modalWindowController.moveModalWindow(50);\r\n        modalWindowView.attachDatePicker();\r\n    }\r\n\r\n    showEditModal(index) {\r\n        let modalBinder = new Binder('app/components/modal-window/edit-modal-window.html');\r\n        let receivedDoc = modalBinder.downloadComponent();\r\n        document.body.appendChild(receivedDoc.getElementById('modal-window-elem-edit'));\r\n        modalWindowModel.downloadEarlierCategories();\r\n        modalWindowView.fillEditModal(index);\r\n    }\r\n\r\n    downloadRemoveModalWindow() {\r\n        let modalBinder = new Binder('app/components/modal-window/remove-modal-window.html');\r\n        let receivedDoc = modalBinder.downloadComponent();\r\n        document.body.appendChild(receivedDoc.getElementById('modal-w-remove'));\r\n        modalWindowController.moveModalWindow(50);\r\n    }\r\n\r\n    fillEditModal(index) {\r\n\r\n        let modalWindow = modalWindowController.getModalWindowElements;\r\n        let taskContainer = modalWindow.task[index];\r\n        modalWindow.titleInput.value = taskContainer.getElementsByClassName('task-title')[0].innerHTML;\r\n        modalWindow.descriptionInput.value = taskContainer.getElementsByClassName('description-content')[0].innerHTML;\r\n\r\n        let modalCheckboxes = document.querySelectorAll('#modal-window-elem-edit input[type=checkbox]');\r\n        let priorityIndicator = document.querySelectorAll('.priority-indicator span')[index].innerHTML;\r\n        for (let j = 0; j < priorityIndicator; j++) {\r\n            modalCheckboxes[j].checked = true;\r\n        }\r\n        let taskPriority = $('.priority-indicator')[index];\r\n\r\n        modalWindowModel.downloadEarlierCategories();\r\n        let choosedRadioCategory;\r\n        setTimeout(function () {\r\n            choosedRadioCategory = modalWindowView.findChoosedCategory(taskContainer);\r\n            modalWindow.categoriesInputs[choosedRadioCategory].checked = true;\r\n        },200);\r\n        let choosedRadioPriority = modalWindowView.findChoosedPriority(taskPriority);\r\n\r\n\r\n\r\n        modalWindow.priorityInputs[choosedRadioPriority].checked = true;\r\n\r\n        modalWindowController.subscribeModalEvents();\r\n        modalWindowController.moveModalWindow(50);\r\n        modalWindowView.attachDatePicker();\r\n    };\r\n\r\n    findChoosedCategory(taskContainer) {\r\n\r\n        let choosedRadioCategory = taskContainer.getAttribute('category');\r\n        let allCategoriesNames = document.querySelectorAll('label.category-name');\r\n        let allCategoriesNamesArr = Array.prototype.slice.call(allCategoriesNames);\r\n        for (let k = 0; k < allCategoriesNamesArr.length; k++) {\r\n            console.log(allCategoriesNamesArr[k].innerText);\r\n            if (allCategoriesNamesArr[k].innerText == taskContainer.parentNode.getAttribute('category')) {\r\n                choosedRadioCategory = allCategoriesNamesArr.indexOf(allCategoriesNamesArr[k]);\r\n            }\r\n            else if (choosedRadioCategory == null) {\r\n                choosedRadioCategory = 0;\r\n            }\r\n        }\r\n        return choosedRadioCategory;\r\n    }\r\n\r\n    findChoosedPriority(taskPriority) {\r\n        let allPriorityLevels = document.querySelectorAll('.priorities li label.priority-name');\r\n        let choosedRadioPriority;\r\n        let allPriorityLevelsArr = Array.prototype.slice.call(allPriorityLevels);\r\n        for (let k = 0; k < allPriorityLevelsArr.length; k++) {\r\n            if (allPriorityLevelsArr[k].innerHTML.toLowerCase() == taskPriority.classList[1]) {\r\n                choosedRadioPriority = allPriorityLevelsArr.indexOf(allPriorityLevelsArr[k]);\r\n            }\r\n        }\r\n        return choosedRadioPriority;\r\n    }\r\n\r\n    renderEarlierSavedCategories(data, k) {\r\n        let modalWindow = modalWindowController.getModalWindowElements;\r\n        modalWindow.categoryTitles[k].value = data;\r\n        modalWindow.categoryLabels[k].innerHTML = modalWindow.categoryTitles[k].value;\r\n    }\r\n\r\n    attachDatePicker() {\r\n        $(function () {\r\n            $(\"#datepicker\").datepicker({\r\n                dateFormat: 'dd.mm.yy'\r\n            });\r\n        });\r\n        return true;\r\n    };\r\n}\r\n\r\nlet modalWindowView = new ModalWindowView();"]}